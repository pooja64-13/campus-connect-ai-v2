<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CGPA & SGPA Calculator (MCET)</title>
    <link rel="stylesheet" href="quick-access.css">
</head>

<body>
    <div class="page-container">

       <a href="#" class="back-button" onclick="goBackToChat(event)">â¬… Back to Chat</a>


        <h1>ðŸ§® SGPA & CGPA Calculator (MCET)</h1>

        <p>This calculator follows the official MCET grading system exactly.</p>

        <div class="section-divider"></div>

        <h2>ðŸ“˜ SGPA Calculator</h2>
        <div class="calc-box">
            <p><strong>Add each subject:</strong></p>
            <div id="sgpa-subjects"></div>
            <button class="small-btn" onclick="addSubject()">+ Add Subject</button>
            <button class="calc-btn" onclick="calculateSGPA()">Calculate SGPA</button>
            <p id="sgpa-result" class="result-text"></p>
        </div>

        <div class="section-divider"></div>

        <h2>ðŸ“™ CGPA Calculator</h2>
        <div class="calc-box">
            <p><strong>Add each semester:</strong></p>
            <div id="cgpa-semesters"></div>
            <button class="small-btn" onclick="addSemester()">+ Add Semester</button>
            <button class="calc-btn" onclick="calculateCGPA()">Calculate CGPA</button>
            <p id="cgpa-result" class="result-text"></p>
        </div>

        <div class="section-divider"></div>

        <h2>ðŸ“— MCET Grade Table</h2>
        <table class="grade-table">
            <tr><th>Percentage</th><th>Grade</th><th>Points</th></tr>
            <tr><td>â‰¥95</td><td>S+</td><td>10</td></tr>
            <tr><td>â‰¥90</td><td>S</td><td>10</td></tr>
            <tr><td>â‰¥80</td><td>A</td><td>9</td></tr>
            <tr><td>â‰¥70</td><td>B</td><td>8</td></tr>
            <tr><td>â‰¥60</td><td>C</td><td>7</td></tr>
            <tr><td>â‰¥50</td><td>D</td><td>6</td></tr>
            <tr><td>â‰¥40</td><td>E</td><td>5</td></tr>
            <tr><td><40</td><td>F</td><td>0</td></tr>
        </table>

    </div>

    <script>
        function addSubject() {
            const div = document.createElement("div");
            div.className = "row-item";
            div.innerHTML = `
                <input type="number" placeholder="Credits" class="input-box credits">
                <select class="input-box grade">
                    <option value="">Grade</option>
                    <option value="10">S+</option>
                    <option value="10">S</option>
                    <option value="9">A</option>
                    <option value="8">B</option>
                    <option value="7">C</option>
                    <option value="6">D</option>
                    <option value="5">E</option>
                    <option value="0">F</option>
                </select>
                <button class="remove-btn" onclick="this.parentElement.remove()">âœ–</button>`;
            document.getElementById("sgpa-subjects").appendChild(div);
        }

        function calculateSGPA() {
            const credits = [...document.querySelectorAll(".credits")].map(x => Number(x.value));
            const grades = [...document.querySelectorAll(".grade")].map(x => Number(x.value));

            let totalC = 0, totalP = 0;

            for (let i = 0; i < credits.length; i++) {
                if (!credits[i] || isNaN(grades[i])) continue;
                totalC += credits[i];
                totalP += credits[i] * grades[i];
            }

            document.getElementById("sgpa-result").textContent =
                totalC === 0 ? "Please enter valid subjects." :
                `Your SGPA is: ${(totalP / totalC).toFixed(2)}`;
        }

        function addSemester() {
            const div = document.createElement("div");
            div.className = "row-item";
            div.innerHTML = `
                <input type="number" placeholder="SGPA" class="input-box sem-sgpa">
                <input type="number" placeholder="Credits" class="input-box sem-credits">
                <button class="remove-btn" onclick="this.parentElement.remove()">âœ–</button>`;
            document.getElementById("cgpa-semesters").appendChild(div);
        }

        function calculateCGPA() {
            const sgpas = [...document.querySelectorAll(".sem-sgpa")].map(x => Number(x.value));
            const credits = [...document.querySelectorAll(".sem-credits")].map(x => Number(x.value));

            let totalC = 0, sum = 0;

            for (let i = 0; i < sgpas.length; i++) {
                if (!sgpas[i] || !credits[i]) continue;
                sum += sgpas[i] * credits[i];
                totalC += credits[i];
            }

            document.getElementById("cgpa-result").textContent =
                totalC === 0 ? "Please enter valid data." :
                `Your CGPA is: ${(sum / totalC).toFixed(2)}`;
        }
    </script>

    <script>
  function goBackToChat(e) {
    if (e) e.preventDefault();

    // Works inside Android WebView + browser
    if (window.history.length > 1) {
      window.history.back();

      setTimeout(() => {
        if (location.href.includes("quick-access")) {
          window.location.href = "../index.html";
        }
      }, 300);

    } else {
      // No history â†’ go directly to chat
      window.location.href = "../index.html";
    }
  }
</script>


</body>
</html>
